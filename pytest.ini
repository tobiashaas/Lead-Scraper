[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --strict-markers --tb=short --cov=app/api --cov-report=term-missing --cov-fail-under=80 --cov-report=html --cov-report=xml -p no:postgresql
markers =
    integration: mark tests as integration tests
    unit: mark tests as unit tests
    e2e: mark tests as end-to-end tests
    slow: mark tests as slow running
    security: security-related tests
    performance: performance-related tests
    asyncio: mark tests that use asyncio
    benchmark: benchmark harness and prompt optimization tests

# Enable asyncio support
asyncio_mode = auto

# Disable PostgreSQL plugin
norecursedirs = .* build dist

# Disable warning about test discovery
filterwarnings =
    ignore::pytest.PytestCollectionWarning
    ignore:Accessing argon2.__version__ is deprecated:DeprecationWarning:passlib.handlers.argon2
    ignore:datetime\.datetime\.utcnow\(\) is deprecated:DeprecationWarning:jose.jwt
    ignore:The 'app' shortcut is now deprecated:DeprecationWarning:httpx._client
